
<div ng-controller="GroupsCtrl" ng-init="attach();getGroupsCreated();getGroupsFollowing()">
    <div id="creategroup" class="modal hide fade" tabindex="-1" role="dialog"
         aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h3 id="myModalLabel">Create Group</h3>
        </div>
        <div class="modal-body">
            <input class="create-group-input" placeholder="Group Name" type="text"
                   id="creategroupinput" ng-model="data.creategroup"/>
        </div>
        <div class="modal-footer">
            <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
            <button data-dismiss="modal" class="btn btn-primary" id="creategroupbutton"
                    ng-click="createGroup()">Create
            </button>
        </div>
    </div>


    <div id="createalert" class="modal hide fade" tabindex="-1" role="dialog"
         aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h3 id="myModalLabel">Create Alert</h3>
        </div>
        <div class="modal-body">
            <input placeholder="Alert" type="text"
                   id="creategroupinput" ng-model="data.message"/>
        </div>
        <div class="modal-footer">
            <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
            <button data-dismiss="modal" class="btn btn-primary"
                    ng-click="publishgroupalert()">Send
            </button>
        </div>
    </div>


    <div id='create_folder'>


    </div>
    <!-- Navbar -->
    <div class="navbar navbar-fixed-top">

        <div class="navbar-inner">
            <div class="container">
                <span id="VectorSmartObject_1"><img src="../img/VectorSmartObject_1.png"></span>
                <span id="Idle"><img src="../img/Idle.png"></span>
                <span id="ampus"><img src="../img/ampus.png"></span>
                <span id="VectorSmartObject_2"><img src="../img/VectorSmartObject_2.png">  </span>
                <span id="VectorSmartObject_3"><img src="../img/VectorSmartObject_3.png">  </span>

                <div class="nav-collapse">
                    <ul class="nav pull-right">
                        <li class="divider-vertical"></li>

                        <li class="dropdown">

                            <a href="#" data-toggle="dropdown" class="dropdown-toggle">&nbsp;&nbsp;Groups<b
                            class="caret"></b></a>
                            <ul class="dropdown-menu">

                                <li ng-repeat="group in data.groupscreated" id="{{group}}">
                                    <a data-toggle="tab" href="" ng-click="groupclick(group);"><i class="icon-asterisk"></i>{{group.group_name}}
                                        {{group.group_code}}</a>
                                </li>
                                <li><a href="#creategroup" data-toggle="modal">Create Group</a>
                                </li>
                            </ul>
                        </li>
                        <li class="divider-vertical"></li>
                        <li class="dropdown">
                            <a href="#" data-toggle="dropdown" class="dropdown-toggle"></i>&nbsp;&nbsp;Admin<b
                            class="caret"></b></a>
                            <ul class="dropdown-menu">

                                <li><a href="password.html"><i class="icon-key"></i>&nbsp;&nbsp;Change Password</a></li>
                            </ul>
                        </li>
                        <li class="divider-vertical"></li>
                        <li>
                            <%= link_to "Sign out", signout_path, method: "delete",id:"signout" %>
                        </li>
                        <li class="divider-vertical"></li>
                    </ul>

                </div>
            </div>
        </div>

    </div>
</div>
<!-- /Navbar -->

<!-- Main content   sabse pehle create yourtimetable format. fir uske baad harrcell ke anadar create the cell.         -->
<div id="main-content">
<!-- Container -->
<div class="container">
    <!-- Header boxes -->
    <!-- /Header boxes -->
    <div class="row" ng-controller="TimetableCtrl">
        <!-- Sidebar -->
        <!-- /Sidebar -->
        <!-- Content -->

        <div class="row" style="
        border-left-width: 1px;
                border-left-width: 1px;
                margin-top: -30px;
                margin-bottom: 30px;
                border: 2px solid #8DA5B6;
                border-left-width: 1;
                margin-left: 30px;
                margin-right: 30px;line-height: 3em;">
            <div class="offset1 span5">
                <img src="../img/GroupName.png">:<span id="groupname"> {{data.currentGroup.group_name}}</span>
            </div>
            <div class="span5">
                <img src="../img/GroupID.png">:<span id="groupcode"> {{data.currentGroupCode}}</span>
            </div>

        </div>

        <div class="row">
            <div class="span2">
                <a href="#createalert" role="button" class="btn pull-right" data-toggle="modal"><i class="icon-plus-sign"></i>Send
                    Alert</a>
            </div>
        </div>

        <div class="row-fluid">
            <div class="span2"></div>
            <div class="span4">From:
                <select class="span5" ng-model="from_date_hour_value" ng-options="c.display for c in from_date_hour"></select>

                <select class="span5" ng-model="from_date_minute_value" ng-options="c.display for c in from_date_minute"></select>

            </div>
            <div class="span4">To:
                <select class="span5" ng-model="to_date_hour_value" ng-options="c.display for c in to_date_hour"></select>

                <select class="span5" ng-model="to_date_minute_value" ng-options="c.display for c in to_date_minute"></select>

            </div>
        </div>

        <div class="tabbable" class="mygroupposts"> <!-- Only required for left/right tabs -->


            <div class="container">
                <div class="row-fluid">
                    <!--<div class="span2">-->
                    <!--&lt;!&ndash;Sidebar content&ndash;&gt;-->


                    <!--</div>-->
                    <div class="span12">
                        <!--Body content-->
                        <div class="row">
                            <div class="span1"></div>
                        </div>
                        <div class="row">
                            <div class="span1"></div>
                            <div class="span1"></div>
                            <div class="span1"></div>
                            <div class="span1"></div>
                            <div class="span2" style="width: 100px;">

                                <button id="AddRow" class="btn" ng-click="addrow()"></button>
                            </div>
                            <div class="span2" style="width: 151px;">
                                   <button id="SendTimetable" class="btn" ng-click="send()"></button>
                            </div>
                            <div class="span2"  style="width: 100px;">
                                <button id="CreateTimetable" type="button" class="btn ng-scope"
                                        bs-modal="'/partials/wizard.html'"
                                        data-toggle="modal"></button>
                            </div>
                            <div class="span1"></div>
                            <div class="span1"></div>
                        </div>


                        <!--<button id="AddRow" ng-click="addrow()"></button>-->
                        <!--&lt;!&ndash;{{data.timeArray}}&ndash;&gt;-->
                        <!--&lt;!&ndash;<button ng-click="new()" ng-show="timeArray.length==0">New Timetable</button>&ndash;&gt;-->
                        <!--<button id="SendTimetable" ng-click="send()"></button>-->
                        <!--&lt;!&ndash;<button ng-click="get()">Get Timetable</button>&ndash;&gt;-->

                        <!--&lt;!&ndash;<a href="#createtimetable" role="button" class="btn" data-toggle="modal">Create Timetable</a>&ndash;&gt;-->
                        <!--<button id="CreateTimetable" type="button" class="btn ng-scope"-->
                        <!--bs-modal="'/partials/wizard.html'"-->
                        <!--data-toggle="modal"></button>-->



                        <div class="widget widget-table" style="
                        margin-top: 30px;
                        ">
                            <div class="widget-header">
                            </div>
                            <div class="widget-content">

                                <table id="timetable" class="table table-striped table-bordered" ng-show="data.timeArray[0].length>0">

                                    <thead>
                                    <tr>
                                        <th>Time</th>

                                        <th ng-repeat="weekday in data.timetable.weekdays">{{weekday}}</th>

                                    </tr>
                                    </thead>

                                    <tbody>

                                    <tr ng-repeat="time in data.timeArray">


                                        <td>

                                            {{getDisplayTime(time)}}
                                        </td>
                                        <td ng-repeat="dt in time">

                                            <a href="#addtimetableentry1" ng-model="index" ng-click="index=($parent.$index)*6+$index+1" role="button" class="editbtn btn" data-toggle="modal" id="sub1" style="
                                            width: 53px;
                                                    height: 30px;
                                                    padding-top: 0px;
                                                    padding-left: 0px;
                                                    padding-right: 0px;
                                                    padding-bottom: 0px;
                                            "></a>
                      <span ng-hide="dt.length>1">
                       <!--{{dt.length>1}}-->


                      <input type="checkbox" ng-click="addBatchToEntry(dt[0])"><br/>  Add Group:</span>


                       <span ng-repeat="datetime in dt">
                           <!--{{datetime}} {{data.timetable.batches.length>0}}-->
                         <span>

                             <span ng-repeat="entry in data.timetable.entries" name="subject" id="s{{($parent.$index)*6+$index+1}}"> {{entry.name}} : {{datetime[entry.name]}}
                             </span>
                    <span ng-show="data.timetable.batches.length>0">  Batch: {{datetime['batch']}}
                    </span>

                      <br/>





                      <div id="addtimetableentry{{index}}" class="modal hide fade" tabindex="-1" role="dialog"
                           aria-labelledby="myModalLabel" aria-hidden="true">

                          <div class="modal-header">

                              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                              <h3 id="myModalLabel"></h3>

                          </div>
                          <div class="modal-body">


                        <span ng-repeat="entry in data.timetable.entries" ng-hide="dt.length>1">
                         {{entry.name}}<select class="span2" ng-model="datetime[entry.name]" ng-options="value for value in entry.values"></select>

                          <!--<select class="span2" ng-model="datetime[batch]" ng-options="batch for batch in data.timetable.batches" ng-show="data.timetable.batches.length>0"></select>-->


                        </span>
                              <span ng-repeat="batch in data.timetable.batches" ng-show="dt.length>1">

                                 <span ng-repeat="entry in data.timetable.entries">

                         {{entry.name}}: <select class="span2" ng-model="dt[$parent.$index][entry.name]" ng-options="value for value in entry.values"></select>



                        </span>
                              </span>


                          </div>
                          <div class="modal-footer">

                              <button data-dismiss="modal" id="AddEntry"></button>
                          </div>
                      </div>

                      </span>
                       </span>
                                        </td>


                                    </tr>
                                    </tbody>
                                </table>

                            </div>
                        </div>


                    </div>


                </div>


            </div>


        </div>
    </div>


    <!-- /Content -->


    <!-- /Content -->
</div>


<!-- Footer -->
<!--<div id="footer">-->
<!--<hr>-->
<!--<p class="pull-right">IdleCampus &copy; 2012</p>-->
<!--</div>-->
<!-- /Footer -->

</div>
<!-- /Container -->
</div>

<!-- /Main content -->

